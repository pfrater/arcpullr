<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Raster Layers • arcpullr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Raster Layers">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">arcpullr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/intro_to_arcpullr.html">Introduction to arcpullr</a></li>
    <li><a class="dropdown-item" href="../articles/raster_layers.html">Raster Layers</a></li>
    <li><a class="dropdown-item" href="../articles/spatial_queries.html">Spatial Queries</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Raster Layers</h1>
            
            <h4 data-toc-skip class="date">06 February, 2025</h4>
      

      <div class="d-none name"><code>raster_layers.Rmd</code></div>
    </div>

    
    
To see more complete package documentation check out:
<a href="https://pfrater.github.io/arcpullr/" class="external-link">
https://pfrater.github.io/arcpullr/</a>
<hr>
<p><code>arcpullr</code> has the capability to query not only vector
(Feature) layers, but also raster layers (both Map and Image service
types). The syntax for these is generally the same as for the
<code>get_layer_by_*</code> family of functions. Map and Image layers
require a bounding box as part of the query, so both
<code>get_map_layer</code> and <code>get_image_layer</code> have
required arguments of a URL and an <code>sf</code> object. These
functions pull the raster layers provided by the URL and return the
layer as a SpatRaster object from the <code>terra</code> package.</p>
<div class="section level2">
<h2 id="urls-for-examples">URL’s for examples<a class="anchor" aria-label="anchor" href="#urls-for-examples"></a>
</h2>
<a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
Example Source Data </a>
<div id="collapseExample" class="collapse">
<div class="card card-body">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># WDNR Server</span></span>
<span><span class="va">image_server</span> <span class="op">&lt;-</span> <span class="st">"https://dnrmaps.wi.gov/arcgis_image/rest/services/"</span></span>
<span></span>
<span><span class="co"># WI Landcover Type URL</span></span>
<span><span class="va">landcover_path</span> <span class="op">&lt;-</span> <span class="st">"DW_Land_Cover/EN_Land_Cover2_Lev2/MapServer"</span></span>
<span><span class="va">landcover_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">image_server</span>, <span class="va">landcover_path</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># WI Leaf-off Aerial Imagery URL</span></span>
<span><span class="va">wi_leaf_off_path</span> <span class="op">&lt;-</span> <span class="st">"DW_Imagery/EN_Image_Basemap_Latest_Leaf_Off/ImageServer"</span></span>
<span><span class="va">wi_aerial_imagery_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">image_server</span>, <span class="va">wi_leaf_off_path</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the wis_poly polygon is available as an exported object in arcpullr</span></span></code></pre></div>
</div>
</div>
<p><br></p>
</div>
<div class="section level2">
<h2 id="map-layers">Map Layers<a class="anchor" aria-label="anchor" href="#map-layers"></a>
</h2>
<p>The <code>get_map_layer</code> function takes a URL and an sf object.
Since the query for this layer type on an ArcGIS REST Service requires a
bounding box any sf object can be used (i.e. POLYGON, POINT, LINE, etc.)
and a bounding box will be created using the extent of the shape.</p>
<p>The example below pulls Wisconsin landcover types and plots them in a
map.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wi_landcover</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_map_layer.html">get_map_layer</a></span><span class="op">(</span><span class="va">landcover_url</span>, <span class="va">wis_poly</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plot_layer.html">plot_layer</a></span><span class="op">(</span><span class="va">wi_landcover</span><span class="op">)</span></span></code></pre></div>
<p><img src="raster_layers_files/figure-html/plot_map_layer-1.png" width="672"></p>
</div>
<div class="section level2">
<h2 id="image-layers">Image Layers<a class="anchor" aria-label="anchor" href="#image-layers"></a>
</h2>
<p>The <code>get_image_layer</code> function works the same as
<code>get_map_layer</code> except that it queries from an Image layer.
The easiest way to distinguish a Map layer from an Image layer is by
checking the URL. Those from images will end with “ImageServer” whereas
those from maps will end with “MapServer”. Another way to check is to
look a the “Supported Operations” at the bottom of the actual web page
on the ArcGIS REST Service. It will say either “Export Image” or “Export
Map”.</p>
<p>This example pulls with Wisconsin Leaf-off Aerial Imagery dataset
from the Wisconsin Department of Natural Resources.</p>
<p><img src="raster_layers_files/figure-html/plot_image_layer-1.png" width="480"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Paul Frater, Zac Driscoll.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
