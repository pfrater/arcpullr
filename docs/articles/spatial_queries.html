<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Spatial Queries • arcpullr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Spatial Queries">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">arcpullr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/intro_to_arcpullr.html">Introduction to arcpullr</a></li>
    <li><a class="dropdown-item" href="../articles/raster_layers.html">Raster Layers</a></li>
    <li><a class="dropdown-item" href="../articles/spatial_queries.html">Spatial Queries</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="spatial_queries_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="spatial_queries_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="spatial_queries_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="spatial_queries_files/datatables-binding-0.33/datatables.js"></script><link href="spatial_queries_files/dt-core-bootstrap5-1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
<script src="spatial_queries_files/dt-core-bootstrap5-1.13.6/js/jquery.dataTables.min.js"></script><script src="spatial_queries_files/dt-core-bootstrap5-1.13.6/js/dataTables.bootstrap5.min.js"></script><script src="spatial_queries_files/bs3compat-0.8.0/transition.js"></script><script src="spatial_queries_files/bs3compat-0.8.0/tabs.js"></script><script src="spatial_queries_files/bs3compat-0.8.0/bs3compat.js"></script><link href="spatial_queries_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="spatial_queries_files/crosstalk-1.2.1/js/crosstalk.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Spatial Queries</h1>
            
            <h4 data-toc-skip class="date">06 February, 2025</h4>
      

      <div class="d-none name"><code>spatial_queries.Rmd</code></div>
    </div>

    
    
To see more complete package documentation check out:
<a href="https://pfrater.github.io/arcpullr/" class="external-link">
https://pfrater.github.io/arcpullr/</a>
<hr>
<p>ArcGIS REST API’s may be spatially queried using the get_layer_by_*
family of functions. These functions require a spatial object of class
<code>sf</code> (<em>i.e.</em> of the R package <a href="https://r-spatial.github.io/sf/" class="external-link">sf: Simple Features for R</a>)
and a <a href="https://help.arcgis.com/en/webapi/wpf/apiref/ESRI.ArcGIS.Client~ESRI.ArcGIS.Client.Tasks.SpatialRelationship.html" class="external-link">Spatial
Relationship</a> to be passed to the geometry and <code>sp_rel</code>
arguments respectively.</p>
<p>The package contains five functions that can be used to perform
spatial queries:</p>
<ul>
<li>
<p><code>get_layer_by_line</code></p>
</li>
<li>
<p><code>get_layer_by_point</code></p>
</li>
<li>
<p><code>get_layer_by_polygon</code></p>
</li>
<li>
<p><code>get_layer_by_multipoint</code></p>
</li>
<li>
<p><code>get_layer_by_envelope</code></p>
<p></p>
<div class="section level2">
<h2 id="urls-for-examples">URL’s for examples<a class="anchor" aria-label="anchor" href="#urls-for-examples"></a>
</h2>
<a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
Example Source Data </a>
<div id="collapseExample" class="collapse">
<div class="card card-body">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#WDNR Server</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="st">"https://dnrmaps.wi.gov/arcgis/rest/services/"</span></span>
<span><span class="va">server2</span> <span class="op">&lt;-</span> <span class="st">"https://dnrmaps.wi.gov/arcgis2/rest/services/"</span></span>
<span></span>
<span><span class="co">#River URL</span></span>
<span><span class="va">layer</span> <span class="op">&lt;-</span> <span class="st">"TS_AGOL_STAGING_SERVICES/EN_AGOL_STAGING_SurfaceWater_WTM/MapServer/2"</span></span>
<span><span class="va">river_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">server2</span>,<span class="va">layer</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Country URL </span></span>
<span><span class="va">layer</span> <span class="op">&lt;-</span> <span class="st">"DW_Map_Dynamic/EN_Basic_Basemap_WTM_Ext_Dynamic_L16/MapServer/3"</span></span>
<span><span class="va">county_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">server</span>,<span class="va">layer</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Trout URL </span></span>
<span><span class="va">layer</span> <span class="op">&lt;-</span> <span class="st">"FM_Trout/FM_TROUT_HAB_SITES_WTM_Ext/MapServer/0"</span></span>
<span><span class="va">trout_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">server</span>,<span class="va">layer</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Watershed URL</span></span>
<span><span class="va">layer</span> <span class="op">&lt;-</span> <span class="st">"WT_SWDV/WT_Federal_Hydrologic_Units_WTM_Ext/MapServer/0"</span></span>
<span><span class="va">watershed_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">server</span>,<span class="va">layer</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#get layers for queries</span></span>
<span><span class="va">mke_river</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_spatial_layer.html">get_spatial_layer</a></span><span class="op">(</span></span>
<span>  <span class="va">river_url</span>, </span>
<span>  where <span class="op">=</span> <span class="st">"RIVER_SYS_NAME = 'Milwaukee River'"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">trout_hab_project_pts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_spatial_layer.html">get_spatial_layer</a></span><span class="op">(</span></span>
<span>  <span class="va">trout_url</span>,</span>
<span>  where <span class="op">=</span> <span class="st">"WATERBODYNAMECOMBINED = 'Sugar Creek' and FISCALYEAR = 2017"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">trout_hab_project_pt</span> <span class="op">&lt;-</span> <span class="va">trout_hab_project_pts</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># get watershed layer for Cook Creek</span></span>
<span><span class="va">cook_creek_ws</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_spatial_layer.html">get_spatial_layer</a></span><span class="op">(</span></span>
<span>  <span class="va">watershed_url</span>,</span>
<span>  where <span class="op">=</span> <span class="st">"HUC12_NAME = 'Cook Creek'"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<p><br></p>
</div>
<div class="section level2">
<h2 id="get_layer_by_line">get_layer_by_line<a class="anchor" aria-label="anchor" href="#get_layer_by_line"></a>
</h2>
<p>The <code>get_layer_by_line</code> function uses A LINSESTRING or
MULTILINESTRING sf object to query an ArcGIS REST API. The below example
uses a MULTILINESTRING sf object of the Milwaukee River to query the
Wisconsin County polygon layer.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mke_river_counties</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_layers_by_spatial.html">get_layer_by_line</a></span><span class="op">(</span>url <span class="op">=</span> <span class="va">county_url</span>, geometry <span class="op">=</span> <span class="va">mke_river</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plot_layer.html">plot_layer</a></span><span class="op">(</span><span class="va">mke_river</span>, outline_poly <span class="op">=</span> <span class="va">mke_river_counties</span><span class="op">)</span></span></code></pre></div>
<p><img src="spatial_queries_files/figure-html/plot_by_line-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="get_layer_by_point">get_layer_by_point<a class="anchor" aria-label="anchor" href="#get_layer_by_point"></a>
</h2>
<p>The <code>get_layer_by_line</code> function uses a POINT sf object to
query an ArcGIS REST API. The below example shows how this can be used
to return which rivers intersect with a trout habitat project on Sugar
Creek in southeast Wisconsin.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trout_stream</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_layers_by_spatial.html">get_layer_by_point</a></span><span class="op">(</span>url <span class="op">=</span> <span class="va">river_url</span>, geometry <span class="op">=</span> <span class="va">trout_hab_project_pt</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plot_layer.html">plot_layer</a></span><span class="op">(</span><span class="va">trout_stream</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">trout_hab_project_pt</span>, color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="spatial_queries_files/figure-html/plot_by_point-1.png" width="700"></p>
<p><code>get_layer_by_point</code> can also handle multipoint objects.
This example shows the same stream as above with a single point, but now
with multiple restoration points.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">restored_streams</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_layers_by_spatial.html">get_layer_by_point</a></span><span class="op">(</span>url <span class="op">=</span> <span class="va">river_url</span>, geometry <span class="op">=</span> <span class="va">trout_hab_project_pts</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plot_layer.html">plot_layer</a></span><span class="op">(</span><span class="va">restored_streams</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">trout_hab_project_pts</span>, color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></code></pre></div>
<p><img src="spatial_queries_files/figure-html/plot_by_multipoint-1.png" width="672"></p>
</div>
<div class="section level2">
<h2 id="get_layer_by_polygon">get_layer_by_polygon<a class="anchor" aria-label="anchor" href="#get_layer_by_polygon"></a>
</h2>
<p>The <code>get_layer_by_line</code> function uses a POLYGON sf object
to query an ArcGIS REST API. The below examples shows how this can be
used to find what rivers are within a particular watershed.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>cook_creek_streams <span class="ot">&lt;-</span> <span class="st">`</span><span class="at">get_layer_by_poly(river_url, cook_creek_ws)</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="at">plot_layer(cook_creek_streams, cook_creek_ws)</span></span></code></pre></div>
<p><img src="spatial_queries_files/figure-html/plot_by_poly-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="get_layer_by_envelope">get_layer_by_envelope<a class="anchor" aria-label="anchor" href="#get_layer_by_envelope"></a>
</h2>
<p>The <code>get_layer_by_envelope</code> function accepts any sf object
to query an ArcGIS REST API using the sf objects bounding box. The below
example shows how this is used to query WI’s Rivers ArcGIS REST API
using a sf POLYGON object of a watershed for a small stream. Note how
the results compare to when this same object is queried using the
<code>get_layer_by_poly</code> function.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cook_creek_env</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_layers_by_spatial.html">get_layer_by_envelope</a></span><span class="op">(</span><span class="va">river_url</span>, <span class="va">cook_creek_ws</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># example of the envelope to visualize how it spatially queries</span></span>
<span><span class="va">example_env</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sfc.html" class="external-link">st_as_sfc</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="va">cook_creek_ws</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_layer.html">plot_layer</a></span><span class="op">(</span><span class="va">cook_creek_env</span>, <span class="va">cook_creek_ws</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">example_env</span>, fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span></code></pre></div>
<p><img src="spatial_queries_files/figure-html/plot_by_env-1.png" width="700"></p>
<p><br><br></p>
</div>
<div class="section level2">
<h2 id="combining-spatial-and-sql-queries">Combining Spatial and SQL Queries<a class="anchor" aria-label="anchor" href="#combining-spatial-and-sql-queries"></a>
</h2>
<p>Spatial queries can be combined with SQL statements to further refine
queries.</p>
</div>
<div class="section level2">
<h2 id="spatial-relationship">Spatial Relationship<a class="anchor" aria-label="anchor" href="#spatial-relationship"></a>
</h2>
<p>The <code>sp_rel</code> argument can be used to define the spatial
relationship between the two feature classes involved within a spatial
query. The default spatial relationships for the
<code>get_layer_by_poly</code> function is “contains”. All other
functions default to “intersects”.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_poly</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_objects.html">sf_polygon</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">90.62</span>, <span class="fl">43.76</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">90.62</span>, <span class="fl">43.77</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">90.61</span>, <span class="fl">43.77</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">90.61</span>, <span class="fl">43.76</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">90.62</span>, <span class="fl">43.76</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">poly_streams_contains</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_layers_by_spatial.html">get_layer_by_poly</a></span><span class="op">(</span><span class="va">river_url</span>, <span class="va">example_poly</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plot_layer.html">plot_layer</a></span><span class="op">(</span><span class="va">poly_streams_contains</span>, outline_poly <span class="op">=</span> <span class="va">example_poly</span><span class="op">)</span></span></code></pre></div>
<p><img src="spatial_queries_files/figure-html/plot_sp_rel_contains-1.png" width="700"></p>
<p>Using “crosses” returns different records compared to the above
example (i.e. this returns records when they cross the polygon
border).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">poly_streams_crosses</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_layers_by_spatial.html">get_layer_by_poly</a></span><span class="op">(</span><span class="va">river_url</span>, <span class="va">example_poly</span>, sp_rel <span class="op">=</span> <span class="st">"crosses"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plot_layer.html">plot_layer</a></span><span class="op">(</span><span class="va">poly_streams_crosses</span>, outline_poly <span class="op">=</span> <span class="va">example_poly</span><span class="op">)</span></span></code></pre></div>
<p><img src="spatial_queries_files/figure-html/plot_sp_rel_crosses-1.png" width="700"></p>
<p><br></p>
<div class="section level3">
<h3 id="lookup-tables">Lookup Tables<a class="anchor" aria-label="anchor" href="#lookup-tables"></a>
</h3>
<p>The <code>sp_rel_lookup</code> data.frame explains the various types
of spatial relationships available through ArcGIS REST APIs.</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9"],["esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelOverlaps","esriSpatialRelRelation","esriSpatialRelTouches","esriSpatialRelWithin"],["Part or all of a feature from feature class 1 is contained within a feature from feature class 2.","The feature from feature class 1 crosses a feature from feature class 2.","The envelope of feature class 1 intersects with the envelope of feature class 2.","The envelope of the query feature class intersects the index entry for the target feature class.","Part of a feature from feature class 1 is contained in a feature from feature class 2.","Features from feature class 1 overlap features in feature class 2.","Indicates that a spatial relationship function will be used.","The feature from feature class 1 touches the border of a feature from feature class 2.","The feature from feature class 1 is completely enclosed by the feature from feature class 2."]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>sp_rel<\/th>\n      <th>description<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"sp_rel","targets":1},{"name":"description","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p><br> The <code>sp_rel_valid</code> data.frame shows which spatial
relationships are valid with different geometry types being queried and
used to do spatial queries.</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105"],["area","area","area","area","area","area","area","area","area","area","area","area","area","area","area","area","area","area","area","area","area","area","area","area","area","area","line","line","line","line","line","line","line","line","line","line","line","line","line","line","line","line","line","line","line","line","line","line","line","line","line","line","line","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","multipoint","point","point","point","point","point","point","point","point","point","point","point","point","point","point","point","point","point","point","point","point","point","point","point","point","point","point"],["area","area","area","area","area","area","envelope","envelope","envelope","envelope","envelope","envelope","line","line","line","line","line","multipoint","multipoint","multipoint","multipoint","point","point","point","point","point","area","area","area","area","area","area","envelope","envelope","envelope","envelope","envelope","envelope","line","line","line","line","line","multipoint","multipoint","multipoint","multipoint","multipoint","point","point","point","point","point","area","area","area","area","area","envelope","envelope","envelope","envelope","envelope","line","line","line","line","line","multipoint","multipoint","multipoint","multipoint","multipoint","point","point","point","point","point","point","area","area","area","area","area","envelope","envelope","envelope","envelope","envelope","line","line","line","line","line","multipoint","multipoint","multipoint","multipoint","multipoint","point","point","point","point","point","point"],["esriSpatialRelContains","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelOverlaps","esriSpatialRelRelation","esriSpatialRelContains","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelOverlaps","esriSpatialRelRelation","esriSpatialRelCrosses","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelWithin","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelCrosses","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelTouches","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelTouches","esriSpatialRelContains","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelContains","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelContains","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelContains","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelContains","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelWithin","esriSpatialRelContains","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelContains","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelContains","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelContains","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelContains","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelIntersects","esriSpatialRelRelation","esriSpatialRelWithin"]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>feature_class<\/th>\n      <th>query_feature_class<\/th>\n      <th>sp_rel<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"feature_class","targets":1},{"name":"query_feature_class","targets":2},{"name":"sp_rel","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="the-valid_sp_rel-function">The valid_sp_rel Function<a class="anchor" aria-label="anchor" href="#the-valid_sp_rel-function"></a>
</h3>
<p>The <code>valid_sp_rel</code> function can be used to to see which
spatial relation types are applicable to different geometries.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/valid_sp_rel.html">valid_sp_rel</a></span><span class="op">(</span><span class="st">"line"</span>,<span class="st">"line"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "esriSpatialRelCrosses"            "esriSpatialRelEnvelopeIntersects"</span></span>
<span><span class="co">#&gt; [3] "esriSpatialRelIndexIntersects"    "esriSpatialRelIntersects"        </span></span>
<span><span class="co">#&gt; [5] "esriSpatialRelRelation"</span></span></code></pre></div>
</div>
</div>
  </li>
</ul></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Paul Frater, Zac Driscoll.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
